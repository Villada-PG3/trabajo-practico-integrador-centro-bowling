{% extends "bowl/navbar.html" %}

{% block content %}
<style>
    .pistas-shell {
        max-width: 1100px;
        margin: 30px auto;
        padding: 20px;
        color: #e8ecf1;
    }
    .panel {
        background: rgba(20,24,35,0.82);
        border: 1px solid rgba(255,255,255,0.12);
        border-radius: 16px;
        box-shadow: 0 18px 40px rgba(0,0,0,0.35);
        padding: 22px;
    }
    .panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 14px;
        gap: 12px;
    }
    .panel-header h1 { margin: 0; font-size: 24px; color: #fff; }
    .btn-cta {
        padding: 10px 16px;
        border-radius: 10px;
        background: linear-gradient(135deg, #2ecc71, #27ae60);
        color: #0f1117;
        font-weight: 700;
        text-decoration: none;
        box-shadow: 0 12px 24px rgba(0,0,0,0.25);
        transition: transform 0.12s ease, box-shadow 0.2s ease;
    }
    .btn-cta:hover { transform: translateY(-2px); box-shadow: 0 14px 28px rgba(0,0,0,0.3); }

    table {
        width: 100%;
        border-collapse: collapse;
        background: rgba(6, 10, 18, 0.82);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 12px;
        overflow: hidden;
    }
    thead th {
        background: rgba(255,255,255,0.06);
        color: #cfe6ff;
        padding: 12px 10px;
        text-align: center;
        letter-spacing: 0.3px;
    }
    tbody td {
        padding: 12px 10px;
        text-align: center;
        border-bottom: 1px solid rgba(255,255,255,0.05);
        border-right: 1px solid rgba(255,255,255,0.05);
    }
    tbody td:first-child { font-weight: 700; color: #fff; }
    tbody tr:nth-child(even) { background: rgba(255,255,255,0.02); }
    tbody tr:hover { background: rgba(255,255,255,0.05); }
    .edit {
        color: #7af0c9;
        text-decoration: none;
        font-weight: 700;
    }
    .edit:hover { text-decoration: underline; }
    .no-data { text-align: center; padding: 20px; color: #cfd8e3; }

    @media (max-width: 768px) {
        .panel-header { flex-direction: column; align-items: flex-start; }
        table { display: block; overflow-x: auto; white-space: nowrap; }
    }
</style>

<div class="pistas-shell">
    <div class="panel">
        <div class="panel-header">
            <h1>Lista de Pistas</h1>
            {% if request.user.rol == "admin" %}
                <a href="{% url 'crear_pista' %}" class="btn-cta">Crear nueva pista</a>
            {% endif%}
        </div>

        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Capacidad</th>
                    <th>Tipo</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for pista in pistas %}
                <tr>
                    <td>{{ pista.id_pista }}</td>
                    <td>{{ pista.capacidad_maxima }}</td>
                    <td>
                        {% if pista.tipo_pista %}
                            {{ pista.tipo_pista.tipo }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td>{{ pista.estado.nombre }}</td>
                    <td><a href="{% url 'editar_pista' pista.id_pista %}" class="edit">Editar</a></td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="no-data">No hay pistas registradas.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
